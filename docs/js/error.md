# js 异常与错误处理，如何正确的去处理错误？

## 简介

首先，这篇文章一定会引起争议，因为对于错误处理从来就没有真正的标准答案，每个人都会有自己的主观意见。
我的理解毕竟也是片面，提出的想法主要是基于个人的经验总结，如果有异议，欢迎交流讨论。
为了能够尽量保持客观，我会将处理思想尽量前置，再围绕处理思想展开。
这样大家就能先思考这个思想是否能够成为前提，以及在这个思想前提下的最优处理方式。

## 1 面向错误编程

为什么说面向错误编程，这里就要向大家发出灵魂一问，你能确保你写的每行代码都是正常的吗？
假设你的代码天衣无缝，但你能确保你调用别人提供的方法也不会出现问题吗？
显然，我们无法保证每行代码的正确性，也无法保证调用别人的方法一定能成功执行。所以如何处理错误就成了重中之重。
这时候可能就有人说了：“当然有可能会出现问题啊，不然要测试干嘛？”我们需要知道的是，当这个错误暴露出来的时候，
可能就造成了无法估量的损失。测试人员在进行测试的时候是不知道我们的代码是如何写的，是很有可能测试时候漏了一些点的，
而这每个遗留点都会成为一个个地雷，说不定哪天就爆了。这也是为什么很多公司都特别重视单元测试的原因。
关于单元测试我们回头专门讲解，今天主要讨论而面向错误编程。为了防止出现极端情况，我们需要先考虑错误情况，再去考虑正常。
这种编程思想我们将其称之为面向错误编程。

### 1.1 墨菲定律

墨菲定律讲的是一个事件如果有两种或两种以上的方式去做某件事情，而其中一种方式将导致灾难，則必定有人会做出这种选择。
就像一艘船足够稳固，翻船的概率几乎为零，但是它还是有翻船的可能性，所以就得备好救生衣。
同样，即使你的代码出错概率为百万分之一，你也得做好应急策略

### 1.2 先判否

在代码出错这点上，我们可以假设一个极端情况，即我们写的每行代码都有可能出错。
所以在写代码之前我们就需要考虑到可能出现错误的情况，在代码上的体现就是我们可能先写了一堆错误的处理，最后才去处理正确的逻辑。
面向错误编程的核心技巧就是先判否



## 2. js 内置的错误处理

### 2.1 Error 类

当运行时错误产生时，Error 对象会被抛出。Error 对象也可用于用户自定义的异常的基础对象。js还封装了一些内置的标准错误类型。

#### 2.1.1 SyntaxError 语法错误

```javascript
// 三元运算缺少冒号 
let a = true ? a b

// 报语法错误
// Uncaught SyntaxError: Unexpected identifier 'b'
```

#### 2.1.2 TypeError 类型错误

```javascript
// null 没有 toUpperCase 方法仍然使用
null.toUpperCase()

// 值的类型不是预期类型时发生的错误
//Uncaught TypeError: Cannot read properties of null (reading 'toUpperCase')
//     at <anonymous>:1:6
```

#### 2.1.3 ReferenceError 

#### 2.1.4 RangeError 

#### 2.1.5 URIError

#### 2.1.6 AggregateError

#### 2.1.7 InternalError


### 2.2 throw

### 2.3 try catch



### 2.4 Promise.catch


## 3. 错误处理只有一次









